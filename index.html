<!DOCTYPE html> 
<html> 
<head> 

    <title>Test Sandbox Page</title> 
    <script>
      analytics.user().anonymousId()
    </script>
   
    <script>
      
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.13.1";
      
      /*
      var dmw1 = function({payload, next, integrations}) {
        console.log("Segment fired an event: ", payload.type());
        console.log(payload.obj.anonymousId)
        payload.obj.anonymousId = ''
       
            next(payload)
          }
          analytics.addSourceMiddleware(dmw1);

      var DMW1 = function({ payload, integration, next }) {  var allowlist = ["event1", "event2"]
        if (allowlist.includes(payload.obj.event)) {
          next(payload);
        }
      };

      analytics.addDestinationMiddleware('Google Analytics', [DMW1]);
      
      
      */
      analytics.load("Ec8iixgxxjzpglKbxKjESW2JrkOko18y");
      // analytics.identify('test_user_id');
      analytics.page();
      // analytics.track('test_provider_event')
      
      }}();
    </script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayerNative','GTM-TDR8LNG');</script>
  <!-- End Google Tag Manager -->
      <script>
        /*
        (function(apiKey){
            (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
            v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
                o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
                y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
                z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');
    
                // Call this whenever information about your visitors becomes available
                // Please use Strings, Numbers, or Bools for value types.
                pendo.initialize({
                    visitor: {
                        id:              'VISITOR-UNIQUE-ID'   // Required if user is logged in
                        // email:        // Recommended if using Pendo Feedback, or NPS Email
                        // full_name:    // Recommended if using Pendo Feedback
                        // role:         // Optional
    
                        // You can add any additional visitor level key-values here,
                        // as long as it's not one of the above reserved names.
                    },
    
                    account: {
                        id:           'ACCOUNT-UNIQUE-ID' // Highly recommended
                        // name:         // Optional
                        // is_paying:    // Recommended if using Pendo Feedback
                        // monthly_value:// Recommended if using Pendo Feedback
                        // planLevel:    // Optional
                        // planPrice:    // Optional
                        // creationDate: // Optional
    
                        // You can add any additional account level key-values here,
                        // as long as it's not one of the above reserved names.
                    }
                });
        })('5b9886bd-c672-4ec8-5d19-01eed141fd6a');
        */
    </script>
 
   

</head> 


<body> 
 <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TDR8LNG"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
<p>First form</p>
<!--[if lte IE 8]>
<script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2-legacy.js"></script>
<![endif]-->
 <!-- 
<script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
<script>
  hbspt.forms.create({
	portalId: "7457584",
  formId: "714f581e-86b4-4382-ba11-d26b37714101"
});
</script>
-->

<!--
<h1>Video</h1>
<br>
<script type="text/javascript" async src="https://play.vidyard.com/embed/v4.js"></script>
<img
  style="width: 100%; margin: auto; display: block;"
  class="vidyard-player-embed"
  src="https://play.vidyard.com/moVpmjzws1KqgAaTadxX6C.jpg"
  data-uuid="moVpmjzws1KqgAaTadxX6C"
  data-v="4"
  data-type="inline"
/>

<script type="text/javascript">
/*
window.onVidyardAPI = (vidyardEmbed) => {
 vidyardEmbed.api.addReadyListener((_, player) => {

console.log('player ready:', player.ready());
 console.log(player.uuid);
 // put your code here

}, "moVpmjzws1KqgAaTadxX6C")

 }
 */
</script>
<script type="text/javascript">
window.onVidyardAPI = (vidyardEmbed) => {
 vidyardEmbed.api.addReadyListener((_, player) => {

//The below code will send Play, Pause and End Reached events for the first Vidyard player available within your HTML

var video = VidyardV4.players[0];

 video.on("play", function() {
  analytics.track("Video Started", {
          video_name: video.metadata.name,
          video_action: 'Play',
          category: 'Video Events',
          label: video.metadata.name  
        },
        {
          integrations:
          {
            'All':true
          }
      }); 
  }); 
 video.on("pause", function() { 
  analytics.track("Video Paused", {
          video_name: video.metadata.name,
          video_action: 'Pause',
          category: 'Video Events',
          label: video.metadata.name
        },{
          integrations:
          {
            'All':true
          }
      }); 
 }); 
 video.on("playerComplete", function() { 
  analytics.track("Video Completed", {
          video_name: video.metadata.name,
          video_action: 'Complete',
          category: 'Video Events',
          label: video.metadata.name
        },{
          integrations:
          {
            'All':true
          }
      }); 
 }); 
 
}, )
 }
</script>
-->
<!--
<h1>Outgrow quiz</h1>
<br>
<div><div class='op-interactive' id='5f9811e9e76f2a78f666e470' data-title='eap test quiz' data-url='https://segment.outgrow.us/5f9811e9e76f2a78f666e470?vHeight=1' data-width='100%'></div><script src='//dyv6f9ner1ir9.cloudfront.net/assets/js/nloader.js'></script><script>initIframe('5f9811e9e76f2a78f666e470');</script></div>
-->
<h1>First JS page</h1> 

<br>
<a id='gtm_page_link' 
   href="https://longstoryshort.github.io/index_gtm.html?ajs_aid="
   title="GTM enabled page"
   >GTM enabled page</a>
   <br>
<a id='adobe_page_link' 
   href="https://longstoryshort.github.io/index_adobe.html"
   title="Adobe Analytics Page (via Segment)"
   >Adobe Analytics Page (via Segment)</a>

<a id='Parent Codebox page' 
   href="https://mvkrj7.csb.app/"
   title="Parent Codebox page"
   >Parent Codebox page</a>

<script type="text/javascript">
  // Get anonymous Id from localStorage. Remove the quotes
  var anon_id = localStorage.getItem("ajs_anonymous_id").replace(/"/g,"")
  // Get quiz link tag
  var link = document.getElementById("gtm_page_link")
  // Get quiz URL from the tag
  var cur_href = link.getAttribute("href")
  // Append anonymous Id to the URL
  link.setAttribute("href", cur_href + anon_id + "some_value")
</script>

<br>
<br>
<br>


<!-- <a id='quiz_link' 
   href="https://segment423.outgrow.us/segment423-4?anon_id="
   title="Quiz!"
   >Quiz link</a> -->

<!-- <script type="text/javascript">
  // Get anonymous Id from localStorage. Remove the quotes
  var anon_id = localStorage.getItem("ajs_anonymous_id").replace(/"/g,"")
  // Get quiz link tag
  var link = document.getElementById("quiz_link")
  // Get quiz URL from the tag
  var cur_href = link.getAttribute("href")
  // Append anonymous Id to the URL
  link.setAttribute("href", cur_href + anon_id)
</script> -->



<p>I am building a directory of the sweetest travel destinations.</p>  
<form name="travel" onsubmit="identify(event)">
     What is your favorite travel destination?
    <input name="destination" required="" size="81" type="text"/> 
    <br><br><br> 
    Any recommendations (cool things to do, places to visit or restaurants to eat)? 
    <br><br> 
    <textarea cols="81" name="details" required="" rows="10">
    </textarea> 
    <br><br> 
    Name: <input name="fullname" required="" size="75" type="text"/> 
    <br><br> 
    Email: <input name="email" required="" size="75" type="email"/> 
    <br><br>
    <br><br>
    <input name="submit" type="submit" value="submit"/>
</form> 
<div id="target-container"></div>

<script type="text/javascript">
    function identify(e){
      e.preventDefault();
      var form = e.target;
      var email = form["email"].value;
      var fullname = form["fullname"].value;
      var destination = form["destination"].value;
      var details = form["details"].value;
      //var userId = form["userId"].value;
      
      var user = {
          email: email, 
          name: fullname, 
          destination: destination, 
          details: details
      };
        
       
      analytics.identify("", {
            email: email, 
            name: fullname,
          }
        );


    analytics.track("Form Submitted", {
        name: fullname,
        email: email,
        destination: destination,
        details: details,
        },
        {integrations: {
    All: true,
    Mixpanel: false,
    Salesforce: false
  }}
        
        ); 
       
        /*
        {
            context: {
              ip: "0.0.0.0",
              
                location: { 
                    city: "San Francisco",
                    country: "United States",
                    latitude: 40.2964197,
                    longitude: -76.9411617 
                }
            }
        }
        analytics.track("GA Event v2", {
          category: "MW Category",
        }); 
        analytics.track(details, {
          category: name,
        }); 
        */
      
      }
</script>
   
</body> 
</html>