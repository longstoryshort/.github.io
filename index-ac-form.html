<!DOCTYPE html>
<html>

<head>

  <title>Sandbox Active Campaign Forms</title>

  <script type="text/javascript">
    (function () {

      // Create a queue, but don't obliterate an existing one!
      var analytics = window.analytics = window.analytics || [];

      // If the real analytics.js is already on the page return.
      if (analytics.initialize) return;

      // If the snippet was invoked already show an error.
      if (analytics.invoked) {
        if (window.console && console.error) {
          console.error('Segment snippet included twice.');
        }
        return;
      }

      // Invoked flag, to make sure the snippet
      // is never invoked twice.
      analytics.invoked = true;

      // A list of the methods in Analytics.js to stub.
      analytics.methods = [
        'trackSubmit',
        'trackClick',
        'trackLink',
        'trackForm',
        'pageview',
        'identify',
        'reset',
        'group',
        'track',
        'ready',
        'alias',
        'debug',
        'page',
        'once',
        'off',
        'on',
        'addSourceMiddleware',
        'addDestinationMiddleware'
      ];

      // Define a factory to create stubs. These are placeholders
      // for methods in Analytics.js so that you never have to wait
      // for it to load to actually record data. The `method` is
      // stored as the first argument, so we can replay the data.
      analytics.factory = function (method) {
        return function () {
          var args = Array.prototype.slice.call(arguments);
          args.unshift(method);
          analytics.push(args);
          return analytics;
        };
      };

      // For each of our methods, generate a queueing stub.
      for (var i = 0; i < analytics.methods.length; i++) {
        var key = analytics.methods[i];
        analytics[key] = analytics.factory(key);
      }

      // Define a method to load Analytics.js from our CDN,
      // and that will be sure to only ever load it once.
      /*
      var dmw1 = function({payload, integration, next}) {
        console.log("Segment fired an event: ", payload.type());
        if (payload.type() == 'page' && payload.obj.event == 'GA Event') {
          payload.obj.event = 'Event Name Transformed for GA'
          console.log('Event name changed for GA')
        }
        next(payload)
      }

      analytics.addDestinationMiddleware('Google Analytics', [dmw1])
      */
      analytics.load = function (key, options) {
        // Create an async script element based on your key.
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.async = true;
        script.src = 'https://cdn.segment.com/analytics.js/v1/' +
          key + '/analytics.min.js';

        // Insert our script next to the first script element.
        var first = document.getElementsByTagName('script')[0];
        first.parentNode.insertBefore(script, first);
        analytics._loadOptions = options;
      };

      // Add a version to keep track of what's in the wild.
      analytics.SNIPPET_VERSION = '4.1.0';

      // Load Analytics.js with your key, which will automatically
      // load the tools you've enabled for your account. Boosh!
      analytics.load("Ec8iixgxxjzpglKbxKjESW2JrkOko18y"); //JS writekey

      analytics.page()

      // Make the first page call to load the integrations. If
      // you'd like to manually name or tag the page, edit or
      // move this call however you'd like.
      //analytics.page();
    })();
  </script>



</head>


<body>



  <h1>AC Inline form</h1>
  <br>
  <div class="_form_1"></div>
  <script src="https://segment86208.activehosted.com/f/embed.php?id=1" type="text/javascript" charset="utf-8"></script>
  <br>
  <script src="https://segment86208.activehosted.com/f/embed.php?id=3" type="text/javascript" charset="utf-8"></script>

  <a href="http://longstoryshort.github.io/ampp.html">AMP page LSS</a>

  <!-- BEGIN: Track Inline Form -->
  <script>
    var activeForms = document.getElementsByClassName('_form_1');
    var myForm = activeForms[0];
    myForm.addEventListener("submit", function (event) {
      //console.log('The form was submitted');
      console.log(event)
      var email = document.querySelector('._form_1 input[name=email]').value
      var phone = document.querySelector('._form_1 input[name=phone]').value
      var name = document.querySelector('._form_1 input[name=name]').value
      var form_name = myForm.querySelector('._form_1 form-title').textContent


      analytics.track("Inline Form Submitted", {
        form_name: form_name
      })
    });
    analytics.identify("", {
      email: email,
      name: name,
      phone: phone
    })
  </script>
  <!-- END: Custom JavaScript -->


  <!-- BEGIN: Track Modal Form -->
  <script>
    var activeForms = document.getElementsByClassName('_form_3');
    var myForm = activeForms[0];
    myForm.addEventListener("submit", function (event) {
      //console.log('The form was submitted');
      console.log(event)
      var email = document.querySelector('._form_1 input[name=email]').value
      var phone = document.querySelector('._form_1 input[name=phone]').value
      var name = document.querySelector('._form_1 input[name=name]').value
      var form_name = myForm.querySelector('._form_1 form-title').textContent


      analytics.track("Modal Form Submitted", {
        form_name: form_name
      })
    });
    analytics.identify("", {
      email: email,
      name: name,
      phone: phone
    })
  </script>
  <!-- END: Track Modal Form -->




</body>

</html>