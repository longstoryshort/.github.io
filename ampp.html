<!doctype html>
<html âš¡>
  <head>
    <meta charset="utf-8">
    <meta  name="amp-link-variable-allowed-origin"
    content="https://longstoryshort.github.io"
    />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <meta name="description" content="This is the AMP Boilerplate.">
    <link rel="preload" as="script" href="https://cdn.ampproject.org/v0.js">

    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <!-- Import other AMP Extensions here -->
    <style amp-custom>
    /* Add your styles here */
    </style>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>

    <link rel="canonical" href="https://longstoryshort.github.io/index.html">
    <title>First AMP Page</title>
  </head>
  <body>
    <h1>First AMP Page</h1>
    <!--Segment plug in-->
      <amp-analytics type="segment">
        <script type="application/json">
          {
            "vars": {
              "writeKey": "KtJRf5H0szmjxemhJbgWltw6DJ38iHyB",
              "name": "Segment AMP page 1"
            },
            "extraUrlParams": {
              "properties.segmentId": "CLIENT_ID(AMP_ECID_GOOGLE,,ajs_anonymous_id)"
            },
              "linkers": {
                "enabled": true
              }
          }
        </script>
        </amp-analytics>
      
    
      <!---Segment original config -->
      <!--
      <amp-analytics>
        <script type="application/json">
      {
        "transport": {
          "beacon": false,
          "xhrpost": false,
          "image": true
        },
        "vars": {
          "anonymousId": "CLIENT_ID(AMP_ECID_GOOGLE,,_ga)"
        },
        "requests": {
          "host": "https://api.segment.io/v1/pixel",
          "base": "?writeKey=${writeKey}&context.library.name=amp&anonymousId=${anonymousId}&context.locale=${browserLanguage}&context.page.path=${canonicalPath}&context.page.url=${canonicalUrl}&context.page.referrer=${documentReferrer}&context.page.title=${title}&context.screen.width=${screenWidth}&context.screen.height=${screenHeight}",
          "page": "${host}/page${base}&name=${name}",
          "track": "${host}/track${base}&event=${event}"
        },
        "triggers": {
          "page": {
            "on": "visible",
            "request": "page"
          }
        }
        
      }
      </script>
      </amp-analytics>
      -->
      <!-- When using this amp-analytics component, Querystring API returns Segment's anonId. -->
      <!--
        <amp-analytics>
          <script type="application/json">
            {
              "requests": {
                "pageview": "https://api.segment.io/v1/pixel/page?writeKey=${writeKey}&anonymousId=${anonymousId}&context.page.title=${pageName}"
              },
              "triggers": {
                "trackPageview": {
                  "on": "visible",
                  "request": "pageview"
                }
              },
              "vars": {
                "writeKey": "KtJRf5H0szmjxemhJbgWltw6DJ38iHyB",
                "anonymousId": "CLIENT_ID(AMP_ECID_GOOGLE,,ajs_anonymous_id)",
                "pageName": "First AMP Page",
                "google_id": "CLIENT_ID(AMP_ECID_GOOGLE,,_ga)"
              },
              "transport": {
                "beacon": false,
                "xhrpost": false,
                "image": true
              }
            }
          </script>
        </amp-analytics>
        -->
        
      
        <a href="https://longstoryshort.github.io/index.html">Orig page LSS</a>
        <br>
        <br>
        <a
        href="https://longstoryshort.github.io/index.html?abc=QUERY_PARAM(abc)"
        data-amp-replace="QUERY_PARAM"
        >Back (query param)</a>
        <br><br>
        <a
        href="https://longstoryshort.github.io/index.html?ajs_aid=CLIENT_ID(AMP_ECID_GOOGLE,,ajs_anonymous_id)"
        data-amp-replace="CLIENT_ID"
        >Back (anon_id)</a>
        <br>
        <br>
        <a href="https://longstoryshort.github.io/ampp2.html">Second AMP page</a>
  </body>
</html>